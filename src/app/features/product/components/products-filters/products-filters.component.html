<div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 mb-6 relative z-10">
    <h3 class="font-semibold text-gray-900 dark:text-gray-100 mb-3">
        Search
    </h3>

    <div class="relative">
        <lucide-icon
        name="search"
        size="16"
        class="absolute left-2 top-1/2 -translate-y-1/2
                text-gray-400 pointer-events-none"
        ></lucide-icon>

        <input
        type="text"
        placeholder="Search products..."
        [ngModel]="state.query().searchString"
        (ngModelChange)="onSearchChange($event)"
        class="w-full pl-9 pr-9 py-2 text-sm
                bg-gray-50 dark:bg-gray-900
                border border-gray-200 dark:border-gray-700
                rounded-lg
                text-gray-900 dark:text-gray-100
                placeholder-gray-400
                focus:outline-none focus:ring-2 focus:ring-[#029fae]
                transition"
        />

        @if (state.query().searchString) {
        <button
            type="button"
            aria-label="Clear search"
            (click)="state.clearSearch()"
            class="absolute right-3 top-1/2 -translate-y-1/2
                text-gray-400 hover:text-[#029fae]
                transition"
        >
            <lucide-icon name="x" size="16"></lucide-icon>
        </button>
        }
    </div>
</div>


<div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
    <h3 class="font-semibold text-gray-900 dark:text-gray-100 mb-3">Categories</h3>
    <div class="space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-1">
    <button
        (click)="onCategoryChange('')"
        [ngClass]="{
          'bg-[#029fae]/10 text-[#029fae] font-medium': !state.query().categoryId,
          'text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50': state.query().categoryId
        }"
        class="block w-full text-left px-3 py-2 rounded-lg text-sm transition-colors"
    >
        All Categories
    </button>
    @for (cat of state.categories(); track cat.id) {
        <button 
        (click)="onCategoryChange(cat.id)"
        [ngClass]="{
          'bg-[#029fae]/10 text-[#029fae] font-medium': state.query().categoryId === cat.id,
          'text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50': state.query().categoryId !== cat.id
        }"
        class="block w-full text-left px-3 py-2 rounded-lg text-sm transition-colors cursor-pointer truncate"
        >
        {{ cat.name }}
        </button>
    }
    </div>
</div>

<div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
    <h3 class="font-semibold text-gray-900 dark:text-gray-100 mb-3">Brands</h3>
    <div class="space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-1">
        <button
        (click)="onBrandChange('')"
        [ngClass]="{
          'bg-[#029fae]/10 text-[#029fae] font-medium': !state.query().brandId,
          'text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50': state.query().brandId
        }"
        class="block w-full text-left px-3 py-2 rounded-lg text-sm transition-colors"
    >
        All Brands
    </button>
    @for (brand of state.brands(); track brand.id) {
        <button 
        (click)="onBrandChange(brand.id)"
        [ngClass]="{
          'bg-[#029fae]/10 text-[#029fae] font-medium': state.query().brandId === brand.id,
          'text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50': state.query().brandId !== brand.id
        }"
        class="block w-full text-left px-3 py-2 rounded-lg text-sm transition-colors cursor-pointer truncate"
        >
        {{ brand.name }}
        </button>
    }
    </div>
</div>

<div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
    <h3 class="font-semibold text-gray-900 dark:text-gray-100 mb-3">Price Range</h3>
    <div class="grid grid-cols-2 gap-2">
    <div>
        <label class="text-xs text-gray-500 mb-1 block">Min</label>
        <input 
        type="number" 
        [ngModel]="state.query().minPrice"
        (ngModelChange)="onMinPriceChange($event)"
        class="w-full px-2 py-1.5 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#029fae] text-gray-900 dark:text-gray-100"
        >
    </div>
    <div>
        <label class="text-xs text-gray-500 mb-1 block">Max</label>
        <input 
        type="number" 
        [ngModel]="state.query().maxPrice"
        (ngModelChange)="onMaxPriceChange($event)"
        class="w-full px-2 py-1.5 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#029fae] text-gray-900 dark:text-gray-100"
        >
    </div>
    </div>
</div>

<button 
    (click)="state.resetFilters()"
    class="w-full py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors text-sm font-medium cursor-pointer"
>
    Reset Filters
</button>
