<div
  class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8
         bg-gray-50 dark:bg-gray-900 transition-colors duration-300"
>
  <div class="sm:mx-auto sm:w-full sm:max-w-sm text-center">
    <div
      class="flex justify-center items-center gap-2
             text-2xl font-semibold text-gray-900 dark:text-white"
    >
      <lucide-icon name="Check" class="text-[#029fae]" [size]="32"></lucide-icon>
      <span>Reset Password</span>
    </div>
  </div>

  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">
    <div
      class="bg-white dark:bg-gray-800 rounded-xl
             shadow-lg ring-1 ring-gray-200 dark:ring-gray-700
             px-6 py-8"
    >
      <form
        [formGroup]="form"
        (ngSubmit)="onSubmit()"
        class="space-y-5"
      >
        @if (errorMessage()) {
          <div
            class="rounded-md bg-red-50 dark:bg-red-900/20
                   p-4 border border-red-200 dark:border-red-800"
          >
            <p class="text-sm text-red-800 dark:text-red-200">
              {{ errorMessage() }}
            </p>
          </div>
        }

        @if (successMessage()) {
          <div
            class="rounded-md bg-green-50 dark:bg-green-900/20
                   p-4 border border-green-200 dark:border-green-800"
          >
            <p class="text-sm text-green-800 dark:text-green-200">
              {{ successMessage() }}
            </p>
            <p class="mt-2 text-sm text-green-700 dark:text-green-300">
              Redirecting to login...
            </p>
          </div>
        }

        <div>
          <label class="block text-sm font-medium text-gray-900 dark:text-gray-200">
            New Password
          </label>

          <input
            type="password"
            formControlName="newPassword"
            class="input"
            [ngClass]="{
              'ring-red-500':
                hasError('newPassword','required') ||
                hasError('newPassword','minlength')
            }"
          />

          @if (hasError('newPassword','required')) {
            <p class="error-text">Password is required.</p>
          }

          @if (hasError('newPassword','minlength')) {
            <p class="error-text">
              Password must be at least 6 characters.
            </p>
          }
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-900 dark:text-gray-200">
            Confirm Password
          </label>

          <input
            type="password"
            formControlName="confirmPassword"
            class="input"
            [ngClass]="{
              'ring-red-500':
                form.errors?.['passwordMismatch'] &&
                form.get('confirmPassword')?.dirty
            }"
          />

          @if (
            form.errors?.['passwordMismatch'] &&
            form.get('confirmPassword')?.dirty
          ) {
            <p class="error-text">Passwords do not match.</p>
          }
        </div>

        <button
          type="submit"
          [disabled]="form.invalid || isLoading()"
          class="flex w-full justify-center items-center gap-2
                 rounded-md bg-[#029fae]
                 px-3 py-2 text-sm font-semibold text-white
                 shadow-md hover:shadow-lg
                 hover:bg-[#028b99]
                 transition-all disabled:opacity-50"
        >
          @if (isLoading()) {
            <lucide-icon
              name="Loader2"
              class="animate-spin"
              [size]="18"
            ></lucide-icon>
            Resetting...
          } @else {
            Reset Password
          }
        </button>
      </form>
    </div>
  </div>
</div>
