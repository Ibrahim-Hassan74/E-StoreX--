<div class="rounded-lg bg-gray-50 dark:bg-gray-900/40 p-6 ring-1 ring-gray-200 dark:ring-gray-700">
  
  @if (message()) {
    <div class="mb-6 rounded-md bg-green-50 dark:bg-green-900/20 p-4 border border-green-200 dark:border-green-800">
      <p class="text-sm font-medium text-green-800 dark:text-green-200">{{ message() }}</p>
    </div>
  }

  @if (errorMessage()) {
    <div class="mb-6 rounded-md bg-red-50 dark:bg-red-900/20 p-4 border border-red-200 dark:border-red-800">
      <p class="text-sm font-medium text-red-800 dark:text-red-200">{{ errorMessage() }}</p>
    </div>
  }

  <h3 class="text-sm font-semibold text-gray-900 dark:text-white">
    Shipping Address
  </h3>

  @if (!isFetching()) {
    <form [formGroup]="addressForm" (ngSubmit)="onUpdateAddress()" class="mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2">
        <div>
          <label for="firstName" class="block text-sm font-medium text-gray-900 dark:text-gray-200 mb-1">First name</label>
          <input type="text" formControlName="firstName" id="firstName" class="input">
        </div>
        <div>
          <label for="lastName" class="block text-sm font-medium text-gray-900 dark:text-gray-200 mb-1">Last name</label>
          <input type="text" formControlName="lastName" id="lastName" class="input">
        </div>

        <div class="col-span-full">
          <label for="street" class="block text-sm font-medium text-gray-900 dark:text-gray-200 mb-1">Street address</label>
          <input type="text" formControlName="street" id="street" class="input">
        </div>
        <div>
          <label for="city" class="block text-sm font-medium text-gray-900 dark:text-gray-200 mb-1">City</label>
          <input type="text" formControlName="city" id="city" class="input">
        </div>

        <div>
          <label for="state" class="block text-sm font-medium text-gray-900 dark:text-gray-200 mb-1">State / Province</label>
          <input type="text" formControlName="state" id="state" class="input">
        </div>
        <div>
          <label for="zipCode" class="block text-sm font-medium text-gray-900 dark:text-gray-200 mb-1">ZIP / Postal code</label>
          <input type="text" formControlName="zipCode" id="zipCode" class="input">
        </div>

        <div class="col-span-full">
            <button type="submit" [disabled]="addressForm.invalid || isLoading()" class="rounded-md bg-[#029fae] px-4 py-2 text-sm font-semibold text-white shadow hover:bg-[#028b99] disabled:opacity-50 cursor-pointer">
                Save Address
            </button>
        </div>
    </form>
  } @else {
    <div class="mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2 animate-pulse">
      <div>
         <div class="h-5 w-24 bg-gray-200 dark:bg-gray-700 rounded mb-1"></div>
         <div class="h-10 w-full bg-gray-200 dark:bg-gray-700 rounded-md"></div>
      </div>
      <div>
         <div class="h-5 w-24 bg-gray-200 dark:bg-gray-700 rounded mb-1"></div>
         <div class="h-10 w-full bg-gray-200 dark:bg-gray-700 rounded-md"></div>
      </div>
      <div class="col-span-full">
         <div class="h-5 w-32 bg-gray-200 dark:bg-gray-700 rounded mb-1"></div>
         <div class="h-10 w-full bg-gray-200 dark:bg-gray-700 rounded-md"></div>
      </div>
      <div>
         <div class="h-5 w-16 bg-gray-200 dark:bg-gray-700 rounded mb-1"></div>
         <div class="h-10 w-full bg-gray-200 dark:bg-gray-700 rounded-md"></div>
      </div>
      <div>
         <div class="h-5 w-32 bg-gray-200 dark:bg-gray-700 rounded mb-1"></div>
         <div class="h-10 w-full bg-gray-200 dark:bg-gray-700 rounded-md"></div>
      </div>
      <div>
         <div class="h-5 w-32 bg-gray-200 dark:bg-gray-700 rounded mb-1"></div>
         <div class="h-10 w-full bg-gray-200 dark:bg-gray-700 rounded-md"></div>
      </div>
      <div class="col-span-full">
          <div class="h-9 w-32 bg-gray-200 dark:bg-gray-700 rounded-md"></div>
      </div>
    </div>
  }
</div>
